receiver das(a: Array) (fun i: Int :: loc(a,i))

domain Array {
    function loc(a: Array, i: Int): Ref
}

domain someR[A] {
    function getR(i: Int): Ref
}



filter allInt(start: Int, end: Int) (fun i: Int :: i >= start && i < end )
unitOp add(x: Int) (-x ,fun a: Int, b: Int :: a + b + x)
receiver unitRec() (fun i: Int :: getR(i))
mapping unitMap()  (fun a: Int :: a)


field val: Int

method test1(i1: Int) {
    var a: Bool := true

    var b: Int := comp[add(1)]{unitMap(unitRec().val) | allInt(0,10)}

    assert(a == true)
}
